import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';
import { Router } from '@angular/router';
import { Usuario } from 'src/app/entidades/usuario';
import { UsersService } from 'src/app/services/users.service';
import { v4 as uuidv4 } from 'uuid';

@Component({
  selector: 'app-cadastro',
  templateUrl: './cadastro.component.html',
  styleUrls: ['./cadastro.component.css']
})
export class CadastroComponent implements OnInit {
  form: FormGroup
  Data: number = Date.now()

  constructor(private formBuilder: FormBuilder, private usersService: UsersService, private router: Router) {
  }

  ngOnInit(): void {
    this.form = this.formBuilder.group({
      "nome": new FormControl('', Validators.required),
      "sobrenome": new FormControl('', Validators.required),
      "email": new FormControl('', [Validators.required, Validators.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]),
      "confirmEmail": new FormControl('', Validators.required),
      "senha": new FormControl('', Validators.required),
      "confirmSenha": new FormControl('', Validators.required),
      "dia": new FormControl('', Validators.required),
      "mes": new FormControl('', Validators.required),
      "ano": new FormControl('', Validators.required),
      "sexo": new FormControl('', Validators.required),
      "tipoConta": new FormControl('', Validators.required),
    }, {
      validator: [this.emailMatchValidation("email", "confirmEmail"), this.senhaMatchValidation("senha", "confirmSenha"), this.userExistsValidation("email")]
    });
  }

  submit() {
    var user: Usuario = { id: uuidv4(), nome: this.nome.value, sobrenome: this.sobrenome.value, email: this.email.value, senha: this.senha.value, dia: this.dia.value, mes: this.mes.value, ano: this.ano.value, sexo: this.sexo.value, tipoConta: this.tipoConta.value, habilidades: [], profilePicture: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAFNCAYAAAD2E503AAAgAElEQVR4nO2daXNjxRWG22Rg9g0GhjUQ8iGV//9nUqkEwj4LzA7DsMSp98bHHB+f7ttXurKlq+epUmm1LFvd/fZZ++Dw8PCwAAAAwE7zGl8fAADA7oOgAwAALAAEHQAAYAEg6AAAAAsAQQcAAFgACDoAAMACQNABAAAWAIIOAACwABB0AACABYCgAwAALAAEHQAAYAEg6AAAAAsAQQcAAFgACDoAAMACQNABAAAWAIIOAACwABB0AACABYCgAwAALAAEHQAAYAEg6AAAAAsAQQcAAFgACDoAAMACQNABAAAWAIIOAACwABB0AACABYCgAwAALAAEHQAAYAEg6AAAAAsAQQcAAFgACDoAAMACQNABAAAWAIIOAACwAC7wJQJsnsPDw3JwcLDW79F7jDH1d9Tec93PGt9/rvcDgDpY6ABbShTbMVFcRTSzn6m9jz5Pz6YCAM6Hg0NmKMCZM2XarSLUY++/ifdc9/0BYD0QdIBzZswtPdVSnwv/e1u/c45wAgCsD4IOsINk03ZVUZ3zvQDg/CApDmCLWMcan5qANnUvf16eAgDoAwsdYEvY1amIsANsB1joAGdIy8rdVmGcYvljxQOcH1joAGdAa5otQfQ2kVUPANNA0AE2yDpC7uu+9VqfTW7P6fLf//73xGunNqDRbbv/pz/96dRj/n1fe+21rs+9yt8LAOuBoANsGSbSv//++3D59ddfh4se++23346f02O6r2vd9+LegwTWBFrXFy5cGC6vv/768W09LpH3j+t+j7ADwNlCDB0WSy32O0eZ1rrZ6BLgV69elV9++WW4mDjrtq5NzHWx+yVY5nO2VTUPgL9v72uiLkH3Am8ir/sXL14c7uv6jTfeGG5PYd3YO7F7AAQdFoyJ1NxOqF7xMGtZYqzbEm2J+MuXL8tPP/10LOjeGtdt+zldlyNBzX6XF11/Pz5e+/z+2v9N9pnj3xJ/p1npEnQv8pcuXSqXL18uV65cGQTeNgL+EokbiuzzrlLCl/0egKWCyx0WTRSqKICbOPDErO9nz56Vx48fD+JtLvEY97b39kLZ41GY+rlWyVDPnov/s+gtKJWNhQT/xo0b5fbt2+X69euD6M8h0J4s5l+STRDAUkHQYbFkC/rU4d6TACYrW6ItAX/x4sWxC93HwmtWvY9FZ+I+9pmz51YNKUx5TWbdZ/F7/x342Lusdl2uXr06CL2uZc33eBamfL74GIIOSwZBh72gV+TG+pfreUtSk3g/evRoEHITcC/eFm/2op29f81NPiVrPfv82d/b476eeqpbZqVnn8uHFXTfMurNXS9hf+uttwYL3uLwre9o23rfA5w3CDoskjktcRPxH3/8sTx58mS46LbFmU24a+/TK57RlT3HZ6/Re/BK9nmm/r6Yy5BZ8T4Eof+nLPZbt24NLnrF4mvinn2+ns8DsEQQdFgkMQs8cxXXYqsmMBYHlxXuE9l8Aphue8u3ln2+ajzXJ8dN+bm5qcX3s88br70HIotv+/e0rH5d9BpZ6kqwk9UugTfrPZbN1XIl4u/s/TsAdhEEHRbJqhal4t+yvr///vvyww8/lJ9//vn4PUxETLR9rbZPdpuLTcZ8sxDAGFOyzWuhBf98DDVYvoHPqLf/q3lDFGeXW/7tt98erHiJ+5TPHj8TwJJA0GGx9C7iEgvFw5WRbu50udhNxO2SCZB3Fdcy1aMQjk25XS7T6v19MZmuHIUuMsvbl//Zz8gzIsv9zTffHC4Sdwt71H4X1jksHQQdFslYEpyeN5f6w4cPB7e6rHHLxrZGKbUyLV9LHS3z6GJeRaA9PVN00xZoFrbo+Zla+CF6Mlou9Pjzcsfru/NWu0T9nXfeGVzyMVt+1ax/gF0DQYe9QiJgLnVdFBc3gbaM9OIEzO6PZZyPCchSSqZWEcco6nGTlL1XbRMUM+p9WaBeqwQ6c8nrds1qB1giCDrsNL3Wr6w6udRljT9//vy4zKwcuW9jPXgUjlXECOpM+V/FeHwm8ibs9hrF1q0MTpnyPa1oqVOHXQdBh60lLuS1RLfW4ybk33333SDk5lbXgq/GJt41nrnN4/vD+eG/j1oFg33ncskLy5C/e/fu4JaP5W9RxGuufsQedgEEHbaSWGrUU/JUnLWmBf3BgwdDprqPtxrWfzyKQfb7YHvHSExGtCx5b62Xo+9bsfU7d+4M4u43c2OCvk4NPsBZgqDDVtJbRx4XY7nSlan+zTfflKdPn54qLysVdy/TYLeJ9f3++7RjZyXyGgOqZ3/33XfLzZs3B0/NWP6DB0GHbQZBh62lN3PbSpqU7Pbtt98OyW5axC2pzaxxn5nuS85a7w3bT9z4xWRGH2O3712vUXz9/fffH0rezGKvjS/GCOwCCDpsLb0udpWcSciV8KZF287k9pZaFPM47OORnkyL7SaOg6ybXiwt9ONJnhw1EdJYUbmb3PDXrl1Lk+fMG4Sww7aDoMNW0pNJrgQ3Jbvdv39/aAyj56KYx4U+y1ovjSQ72E5q5WzZd1j7ruWGt4N2JOZyw0vYlUjXKpeLNfMA2wKCDltLzSKSZaUYuS66LXe6P53Ltw+NZN3covXmYeHeLmoJarU8C8+hO/zFnvfxdd2XmMsNL6tdZ7YbjAvYBRB02Bkk3nKv37t3byhBswU6HpLiG41EV3pJDuwoLNg7R/Z91RLjvND7NrO+34AJu67tKFc1p1ECnUQeYBdA0GGryOp99ZhatMoil6Br0fVlR/Yas8ytJ7inp6a8FqOH7WDMzZ59n/613lUuN7slx8XyRb1Om0c9pqY0stgl7GzyYNsZb58EcIbERVNxctWTS8gVJ5cVZWJtwu0zl83tPrWOnKS47SfrGJeFTUpHbkRs82u3tSm0GnaNNZVA6lpjTzXsWOuwzWChw5lR67aVxcq1qFqrVvVbl0VlZ2THVq1GbXHPqCXHFcR8Z+j5zrLXZIlth0mPeNskyhuki3rDmxve94in8QxsCwg6zE5vc45a0puEW1a5StEk5EZWbzyWCAUwNg5ryZHZ+FTy5UcffTTUsJuojzU7KiGmn415gDlA0GEj9FhMJVjtuv3y5cuhMYy1bDUrKb5HrR0swCp4cY/WumH5GRJ1WerKhLejWmub0955ADAHCDpsnB7LxCe+KYPdmr8chrPHW2JO4w+YQgwBZTH5WNvuGxWpdaysdR3+EsmWVRuzjE/YFAg6bIzaopahvuufffbZkHzkY5yZe92g5AxWwVvhnrExZuVt/mdV3vaXv/xlEPeMKXMAYF0QdNgYPYuZFkhlEn/55ZdDL3Ylw8UM5PiztY5gJbGyAGrjr5YZ3zPerDe8XqMuc5988skg6lnfg0N3il/2ewDmAkGHjTFmOet5xcr/+c9/Douj9dHO+nBn19l7k60OLWrjo2dM1bLirZTyb3/723DmejZ2s/cFmBsEHTZGzPD1C5ksHPVh/+KLL47bt/oEI58Mly28meUeXwPQojVuslj3QXLYj8apeiXoWslyn3766dATviXqCDpsCgQdNkZN0GWNf/3114ObXbdV4+ubxYy5Qj3Zc9bek4UTIn5c1dzjNbIxaZnv1nlOG1O53997771TZW3xZwHm5vSIBtgAtojJPSnLXIKusjRr2mFCroVxSiYw+1GYi56xZOEg8yJZvoed8qcx/fnnnw/nDVgPBQQczgpav8Ls1MrH5FrXQqfSNC12WgStfastkLFELb5PVqLWcu0DeOJYig1fWh0EI/azNn6F8kA0zhVKkvdJ7nc7zrf2OwDmApc7zErNVS7LRZa5LhJzLYK+hWstQYn4OJwnrSTLmMdxeHRAkJ3apg3rhx9+OJyxLlHP3gdRhzlB0CElW3RaC1rLSpbFojauEnPdNjH3DWJY2GBXqI1XPWblbJYHonCSTmtTTN1EfUpMHfGHKRBDh5TaguXpaewia1xudrVz1UJnLvbMusmafQBsG61ucuXoJDfbsMpav3///qmYequJDcCqIOhQJVt0WotQ1jRGQq7FTD3aD47OnjZBj93gAHaB2tkCxR3pq4sd5auxLw+Vei5YBUacM2NnEjA/oAcEHZr0Wg2Z0KudqxYyHX9awmJXgpveCzzANuPHrfc4HYYT2vyYVq26kkE1J+Kcat1nPsAUyHKHtcnEXCKu0jRdmwvSnyHdslTIAoZtJdaxZxa2Zb7HhE+1NtacUFz96tWrJzLpcbfDHGChQ5Ox+HYmuspo//e//10eP3483PcxRUsc8u/JYga7RGZR18a0xrtc77aZ1ZxQnbrmiGcs7MQ8gR4QdJiEZfjWFiAlvilWKGtECUF+gfMZwPEQlWixF5KEYEsZO+DFty+2S3FZ8Iqpy/WuuRAZ80oxJ6AFLneYDS1WskAePnw4LEwq0/FuR7+w+V7Yhi8HYuGCbaZWslnzaPlEUAn5gwcPBqv91q1bx4cSAawLIwlmQYuXzjJXiY7i5rpvWb66mDVyEE5SqyUTEVeEbSR6ljJ858MSxrzmgcrXdGSwHlc8Xcev+vySFuSVQAtc7jALWqRUoiZXoprHWEzRiG76LPmNmDpsO7UysylJnRZ6evbs2XF/hhY9bWgBCoIOq5CJ7vPnz4cFSmIeabkk43uN1eMCnCd+vMZxmyXEZZtVe0xzRRvgnlI2xBx6wOUOp8gs6xLE1i8wcrGrxlai7jN6M7c5JWmwFHpbthY3Z+R6txawstSVPKqWyCpju3LlSrpZZq5AL1jocIqxE6b881qUZGGoDMcy2AuLEMAp4tww17uazljWO50TYR0QdEiJiWmZ1a4FSW52JfioRM0n9uAyB8iJneY0d1QdornUEnXmFIyByx2atLLNbSEy6yI7eAUATmLzQxvgw6MjVzWHLl++PLje/cb4IJz3D9ACCx1WQouMXIWKm+vat7tE1AHqeAvcStwUspKFbnPJg2UOvSDocIIsAz1L1JF1LqvCDl7JMtUBICf2W1D4SnNJ4Ss7ZrW4+RgbMDHHIANBhy5iIpyayFjsPB5CAQBt4lyxDnKaU8p89wJOoyXohRg6VPEi7m+rfvbRo0fDwmNnnLPoAPQR54iPmcvlLlFXPP3SpUsn5hVhLBgDCx1OkGXYxr7VvsxGloUXdADox+aPXcxK1wEutXPRmWtQA0GHlFYnN1noivcp1uczcLHOAfrxneNMoBXC0tzSHPPzyZ/cxjyDGgg6VMncfBJxZbb7/tMxwYcFB6BO7TCi4prNKEfFJ8dxCiH0QAwdqtgJUbaY2EKj2HnNHVhYdAC6qIW3NH80xzTXrJUyOSrQAxY6pGQxOgm66mXlDiSGBzAf0WLXPFOuSjyJjfg5tMBCh27kDtQiYyeq+XK1lsUOAH8Qk0zjc5pnEnQlxlnMnDkFPWChQxdaVBTTU8KOEndaiwyLD0CbTNR95zjNNQm6j6MDjIGgQzfeDWiLT81KB4CcmoVuc8msdM01zTnmFfSCoEMXVn8ui8HE3JJ1shPZAKB/bhm2Sbb5FuvRAVog6HCKbAGRm12Zt9bqNWsmQxYuwDxofll/98ztzjyDDAQdujD3Xyy1iY0xCosNQJPYsCnbGJulblUlzCnoAUGHURQzl6DLOi+uPp1FBmBebINs8XRLRM3K1wAiCDqcIi4WVn9uyXCl0Rq2IPQAo9TKPKPlbq2Wo6ADZFCHDqNYXaxZD5lgYzEA9GPzJW6QjZjtziYZekDQ4QRZfbkeMwu9JDE/b1HExwAgp9af3Yu95pwsdH8+em3OASDoMIq3Hrzgk9UOMA+xdM3POU5Yg14QdOjCx8trVgGLDkA/Ncvcb551idY5QA2S4uAEmVibhdCKnSPmAP2MzZc4rxB16AFBh1EUx9OCYotKTOgxaP8K0E/NQi9Hz9lG2s89/1ri5xDB5Q6jYB0AbIaeDbBeQ9ka9ICFDqPEpLhCdi3ARogd4wCmgKBDF72LC4sQQB+Z27y2YSaUBT0g6DAbiDlAHz1zxQs+cwt6QNBhFJ38ZIwtLCTrAEyjx83u5yBADZLiYBR/+lPt7HPK1wBWx5o0xfllRxXbgUgALRglMIoWFFtULOO2djALAEzHb4g1vyyrXXPuwoULCDp0wSiBUbTYaFHJ3IFZjA+RB5hONr/MQieMBT0g6DCKFpXXX3/91FnNfqGpHQcJAH340Jblomheae5FC51NM2Qg6DCKuf0MW3gKB7QAzIqJuc9XeeONN1KXO/MOIgg6nCIuFLLEL126dGKRqR2hCgDTyHJR7DHNOQk6We7QA4IOp4gucy0mFy9ePLYSSIgDWI/WiYX+VMM49wBaMEqgCy0qstLLUW936++OqANMwyeS+vnjj0u1g1lknSuG3kpIBTAQdOhCi8rly5dPuN2zU6AAYJxeC12baNtIexBzyEDQoQsJ+dWrVwdhF7/99tsg5j6WjrUO0IcPWWX5KLooEdU20QA9MFIgJRNnLS5aZKIVgagD9BPnSCxTM6+XNs/aRGONQy8IOnSjBUbuPy0wPs5H/3aAadSSSr3Vrg20clcAekHQISUKtHWLu379+nHWrU/gKfRzB1gJ2xj7fBSzzmOHRqpLoAWCDt1IxGU16GLuwehux1oHmIYPYUnUNc/kCSN+DlNhtEBKZgXYQiML3cS7JOU3CDrAatiGWNa5hbcizC+owfGpUCWKtHWMu3LlyqnytZgkV3C9A1SJouyPTZWb/caNG8M8ix3iEHNogYUOk9ACI+vB16T7RB4AGCcLT1kZqDxg0d3O5hh6QNBhErbgSNS14PikOCu/MYsdAE7jN8E2f+yiDbPEXB3iMiueeQUtEHRIaSW3abFRtrs1mYkWOgsPwDjezW7WuebWzZs3j+eW4ecUcwtqIOhQpbZwKMZ3+/btQdRjjA8xB+gjO9Xw2rVrQ/zcH1fsYW5BCwQdUrLjHD1KjpOoy6KweKC5DYmlA9SJcXMLWSmUpTllZaEe5hT0gKBDN17UFS+XhS6LQrfV210Xy4anfhbgNJofmhv+KOLirHNdvNcrbqQRdmjBqgsrozif3IO6/vXXXwdBLyPxdwA43VVRLnaVqcXYuYc5BWMg6LAyWoTu3LlT3nnnneF2zNgdi6f7DlklLFjECmEXmDJmLfnt999/P3HRe2gevf3226di5zSWgSkg6JCSxfCyhUQWxVtvvTW4303UtUitI8iIOewaPRno3ir3sXO52SXoiqEj1rAOCDpUiUejGtHylqtQC5KSefS4BL247nKlkv2enQOdPQ6wrcQxmx2kYq+xuLkXc80debh0XZtfbHChFwQdJpEtNBJtCXpM6MnIFkDrBU/JG+wCtdPPahvRmtDLuyXPluaOudrHLHw2utACQYdRWuc2Gypjk+tdZWzC3O5WxmaZvSxIsBTGDiSyce83rcW1eJWgS8xtzgCsC4IOVWpu8lJZwLQ4mbWh562UrRy5G2O5Ts0awUqHXaKWGBfF3Jd26qINsC41Mtc7cwNaIOiQUrPK/aESUdS1gL3//vtD60rd/uWXX070dW+5Kj1Y8bDNtDaiNdG1uLnKOzU3JOTvvffeqX4NPWMfUYcaCDrMijJ1P/nkkyGWHnu7WyKQh5PaYNfo2YB6cfdlnOUoPPXxxx8P1/H1AOvAeeiQ4mN+3s3eyr611yljV5b6/fv3Byu9HMXUe+A8ddhmanMhI546qJi5TimUZR6z2rPbRs/vAihY6NBinaxaCbrKcazXu69NxxqHJVAbx37eWF+GcnRKoZrH3L17d7JAk+EOPSDocIpaMk7PIuRrbi2erkVNyUDeSo8Z7xwNCbtGNmZ9Ipw9p7GvOaAStQ8++OA4HNW7wc3mHvMEMnC5wyl6k9RsUfJ15P61Wtw+/PDD4bEHDx4M7nclBSkL3me8R+L7AGwTdrJgCTkgGs8+bq6xrtvKK3n33XeHDa4f837+9I535gW0wEKHtfAxxWwjoMSfjz76aHAzyjKptYZloYJdJavYsEQ4jXmFniTmmgtUdMAmwUKH2YmLm2KHslBksfzwww/Hrvdo3QPsAllDGS/kFl6SJ0oeKm1mW6eoAcwFgg6zk2WpW+a7FrunT5+eKGGLnbSwWmCbqY1VS/7UGDfLXBtZO+OA8Q2bBpc7bBxbwJQUJItF11rcFFP3Z6h7yOqFXcHGqcTc4uZKBlUCnMS8IOJwRhwc4uuEDROH2IsXL8pnn31Wnjx5MiQJWdZvTJJjaMK2kcXKNW4tN0TXb7755tBcSTXntdMKEXjYBAg6bAS/aPkucVbW8/Lly/Lll1+W77///nhRNHH3h7oAbBOx/bHvBKfxq7MM/vznPx+72W0cx1I2xjZsAgQdNo4tbLH2XI/961//Kl999dUg5EocssXOrHUWPtgmfFmajU2rM1c1x6effnriAKLiBJyxDJsGQYeN0ZMEpJijWsT+5z//OT6JSlnxMVEOYBvwVrm1NVY2+1//+tehC5ydax4ZO2oVYA4QdNgYtUUsPq77z549K//4xz/Kq1evBmvdXO8sfrAt+HFr5WnafP79738fkuBaLnUEHc4CBB02Qs06r7khdf/58+fl22+/LV9//fVg6cgFH8+UBjgv/JnmEnSVpKlq48aNG6c2rIg2nAcIOmyEMUHPnlOW8E8//VQePXo0iLrc8bLUJe5e1GNCkn8/hB/GiAmbhuVuxLFlcXOrMZdVrhPT5GJXfwWNUYBtgMYycObUrBctpir1UYawLl988cXgitfC6vu/b/J4VVyj4L1IlsEuMdfl9u3bw1nmt27dOtG7vbZx7X0cYA6w0GEj9Fjo2fOGFk+J+b1794bSNllGcsF7aygejOGFnmENNeKZ5nG8eKE2F7s2lHb0qVzsLau8N3cEYG4QdNgI6wq6vVb16sqC12ltP//88/C4Jc0ZUczNVcqiCZHsqNOSbAKt65vQoSqKl0vMswNWjGwpzQSdcQmbAkGHjdAr6J7aQicLSYe6KGFOXea02FrCnAm7va/E3LtAWTzBExvD+MRMOwVQFxNzudZ1BoG6v/WUpEVwucNZgqDD7PS4FnuHnW+x+eOPPw6WusTdFtzasa3ebQoQRdw2fsW53i1Wrvpy5XLIKrfEt9gspnfc1sY8gg6bAEGH2elduHqGXpYJb9a6ytx0X1a6L2+z+5bQRBkRaAz4cwOsjtzCMybmes7c69euXTtlla8yZrOfZTzCJkDQYStpLX52UpvK25Q0p+S54mLrvnRtqmUFyySeu69xYWVoJu7KYFdduZrEXLx4EXc57BwIOpwZUxbEsQSj4pLmlAUvV7xuF3cClrfcGeb7iw/beK9NOXpOJZKyyhUnl5DHMwemJHKu8nqAuUDQ4UyYOsxi9nEryU3PK1lO1vrDhw9P9Ni2pDkWVbAyNFnmQg1i5FpXkxiJ+ljcuzhLfwqMPTgrEHTYCKvEC6d2l4sdv2R5Ka4uYX/8+PGQOGexU+s2B/uFjR07q1yoQkLZ6xLy69evnypf63G1Tx3fWO1wFiDoMDtnsXi1FlQrc5MbXpnxVo5kr/XJc/79YhtZ2DyrJizW6smLc63H1+iijHVZ5VkZ2iaT1hB0OAsQdFgkVkushDmJ+5MnT4bGNDbc7fz12LubxKc+zjsvIXYJNKxFqzZ1eo2+ZzWDkSV+586dwTLX9w6wRBB0WDR2qIYsdSXPSdx1AIwvY4o94kuoTc6ITUlKsMKYVm2ynAjfQ70k/8Osj7+/tvi4vjN9rxJxZa7rIstcMXOAJYOgw96goS4xV3xd4i6rXSKgxV+LvSy3mBHtaVnt69bb7wPr/I8yF7ttuEzIrd+/ys5kjcutXkt2A1giCDrsHVbHLqtdtey6WAJdcZn1liXvRX6dxiLwB73/x9ia1S7RO2KJbhJyHZ7iN2cA+wKCDnuNRFpWuxLoZLXrth6TINR6d5cVWtpOFZdNHhG7DlNj52OvjWGO4jZU2XvpNbLEX716NdyWeEvEdRk7m5z8CFg6CDrAEbL8VPYmYZfVbqe7mTXo28v6RCwj1swX3O0nqJUcZmViFu6w/6lv4avNlgRc2epqBOMbCEV6GhQBLAUEHRZJrUwoJq5lh7vocVmAypCXuMs1b1nT1vM7JtX5I10tMSuWysXfH39nZFuFZ8pnjX0CylEM3P5vJclMt+/FkhV1XyIua1xxcV0r5yH+X6eUnSHqsEQQdFgkLUHPFv7WAi83vERd3eiePn063LdudD5L3r9nFCaj5kqusU3Cs8rnbP3f/f/JRN1eI8GWC10JbspW1+2xBLdYlZBlxY99XoBdBkGHxdKKmY4t8LXuYBIM9YyXsCtbXla8xN3Hbk3AfVLXPglKa0kxz0V8jeUtSLxlhUvIJeBRlM0zMvY7EWzYRxB0WDRj7uGWCzxzx/vn7exsWeyKveuiuLu53GPHMhOnaNHHz+S9BrUEsfOg1ZI33vZxbx//9h4N3VYMXCIuN7rVivvKguz/3uouN/bdIvSwZBB0WCxTXMSZG36q1Sfhkmte1ruseMXhdbEjOk2MakLjNxCtzcQUNiFq/m+Igm2Pecva/hZZ4BJwWd4Sb3OlZxZ3mbgZG/s+yXCHfQBBB2iwihDE7mUm7rLeZc3rWpa9xY1L+D3xoJAecW8J2hyvz7q3xQ2KWd4q95OlLeFW21V/7UsBx/6mKUluAICgAzSpxdJXEfhyZMWriY0uEnVd7LY9bla9LvHn7XfXPsNU4ctc2FkLXH/f+uCbcOu2XWSB62LP++Nre/9vxMMBVgNBB2gw1UJf1cVtMXmJuETdrvWY3bfYvD3uH5sSa88E3GL7Vn5nLnMTbxNrL+Ym2Lquuc3j79VnjaGF2mt7/3cAcDSXEXSAzbKuOEXXdky6i/H5Vqy+hHi9v8TDakyka01bpnz+7DOM/QxiDjANBB1gg5yl+3jdqbyJz7bq34+gA0wHQQfYIGOJXVOT186TVT8r4gxwNiDoAGvQWzoVX9Pb2GYKWQObMcZa0mbs+sYEYKkg6AArMvfUmUPUz4Ipn3NKdtmRSUwAABStSURBVDsArAeCDjAjPdNpndKtuS3h3uY7vaGDVqe2nmY+ALA647UmANDNWBOYVYSrViM+93uv8rqp5XLZbQCYByx0gHNmaib4FMt21fdexYsw9ntaZXS9vwtLHqAOgg5byzou2Sku65r4bEo8esSpV4jPwm09tY78vGLm6yb29b43mwrYVi7wzcA+EEU0W/zjYy1hWmeBnyLk67zXXGTZ861NyToNdMbeA2EFqIOFDotk1e5kGav2ba+x6ufYJub4n8zlddn07wXYFRB0WCxjru3eLOzeeHCrDjx7bpV67hqrlodtortc9neeheeBODvsOwg6LJKprtkeay5maXsBGTtsZCmMnfY2Ffsf1v6f/n86NQkPYN9A0AEmkJVebYuYrzOVz/OzTxFqYugAdRB0WDxnadllFqehU9FK8nn8a/3paf6+Tlir/R7/HlOnczxJLduc+JPY/PP2ePyZ7GjW2mvm/P9jwcO+g6DDzrKpk8ymvO/h0Rnf8dxyu/gzy/3Fv+bQnYXuX1sT6Cjm2e2px5P2Cq0XcTs73c5FtyNX/Znq/rX2On+xc9V7zlQ/i+8b4YddBkGHraW3jGmuWG4UWgmsF2k9b/d/+eWX49eYAJdEdPxzmySLa8fYc0xO86/f9DLgLfpItkF4/fXXh4sJvR63x+LmYKw73xyQcAe7AIIOW8scFpkJtVm8XrQlyrqYYJtY27W9NkuGyyzomnUbE+tMWE3I5m7nuinGloosDBCfy15fgmDa35z9f6KF/8YbbwwXs/L9RiB6CWobijE25RkAmBsEHRZBFFcJ8s8//1xevXo1XH766afj2xLsaFX7i3crZxnXmRXcYp0SrFU4i1jyJv6mVm6B3wjZhqqEjUB08UvYL168WC5dujRc63L58uXhotd5DwUiDUsAQYeNkbnD17F2/GLuLWwJ98uXL48F3FzhZmXHxK/s968j1HOGAzYxHc/SXTw1dh+fK53/g/jaVljDb9a8u96sewm8RF8Xs/bNld8aO9nnibBRgLMEQYdjxgSoN3koWrurxDije9wsblnaEm+zuEvjc3tLrlUrPna/9X+AzTH1e6jdj9fZeLTnJOAS9itXrhxb9BJ53fZu/Kkb0VLav7/1t7EpgF4QdDhBayHpHSreWhpb/Lxw+1i2BPvFixeDiJuom6vcNgs+Huo3DqtsIpgGu03vdx3DLP625UuYV8cE3F9L7K9evTpcZ/H6ng3xVM9NzMHIHgcoCDpEWi7xqUMl2xDYgmnJZ+YuN/GW1e2zymO9cy2RLMvWjgts6/MzDXab3sTCmMzox1JM0vP9APx9X4ZnLntdJPQWq7fs/NrGspYQ2Prs8ecQdIgg6Atkmya9PosEWkJtwv3jjz8O4q34d63WWgtmafQBr1lDtfeD/SUT7JYHp5Z0Z/hNQXwfs+zNkr9x48ax+36qq34TUH63bBD0BbKOoI+53GNMOnt/ibVZ3CbmZn1LxL2lU7O6M+u6d6j6bOja87B8Mm+TXWpjo+Wh8uMqi89HodcYlgUvcbdYvFz0Pgmv5sXyMf05rXQs/GWDoC+QdXbhUxKI9LjFvyXWz58/L8+ePTsWcLPA/QJaqweOVlT8vVOG6dhrWciWzybHQGt+HYYSyOha9yIvq/369evDRfdl2ce5Et83fn4EHTwI+p7TEzPPSr8k4rLCHzx4UJ4+fTqIuLe8swYetaS1LJ44xRqvLW643yESx2UrEz6+Lsvb6BF1nyRaCx9J0G/evFnefvvtcu3ateOQU3Eu/swrtsrmfWpSHuwOCPoek331tQVKrnNlnpsVrtvW/rQklnUtBj6WJNT7mXo+c7R2GOr7x9gYWGVcZF6kTGRrG8pWO2BriKP4u4RdIq8YvB5rfZb4GWA/QdD3lNYu/TA0b3n8+PFgiSuZzWf+Hrj+29nC1lPCM/ZY3ABMsepZ4CDS2jD2lpxlP1t7LJtnmdD7g3v8c5pbEvc7d+6U27dvD276VWrhYT9A0GHAu9cl4D/88MNgiVsdeHEC7ktyYjmPZ6prb6q1UXt/b3WR1Qs9+SDxfitvZBUyL1X2mJ9TVr5pr9Pck2temfNvvfXWIPCt5NRVqc0r5tL2g6BvMWMZ55ExyyBiC4escFnfEvInT54MIm5xcz+J7dQrbx3EOGGW3AawTWRenji35h63tbkcY+Ne6P1RuiV4CTQHZa3funWrvPnmm4MVr2S73uY2q6wntedge0DQt4jWVzFlx+xLZ2rPq6mLRPz7778frHFroxoXF9/QJf7eeLv1mQBgfJ7UYvJe1H15nD2uUjhZ7bpI3LPz5Q8rDXWyedwj+LXXwvmBoG8Rq5ba1HbX/nGLiUvEHz16NFjiavQit15x9a5ZTbhfZBguAOdDLe7uhd1i7rLc5ZLX7XhmfG0e15IGS7KJX7VsDjYLgr6lrCruHpvosr4l4kpsU1xcwq6ftzOkW+/FhAXYHlphAhN4c9VLyBVvv3v37nFCXQyXGWNhiOz1rA3bB4K+I0R3WRmx2BUXlxUul7pEXPeFd8VlvdKN1nGUAHA+HCZ9HmKHOh9rt4RWxdcl7sqWl/WuMrixWPth0rGOWPp2g6DvCD1xcWv2YiJuLnVLovEnSB24Lm+GLRS1+lkAOH+8dZyVuflMeTup0GfKq65dFruS6XS75qU7TPrVI+jbDYK+ZaySGKcENwm4ktvkWleWutAu3HecKo3e0NEiXyVTFgDWp2d+1Ure/POHSc95L/AqgZO1/s477wzWeyv8Fg0K5v92gqBvIX4y1upMrdxMbVfNIpewmyXuXx8z1LNddivjFQC2i9p8zbLYo6j7DHldW6zdN6/JNgelI9wH5wuCvqXUXFuW5Kb4uCxy1Y6bkFvbSBPwmuXdcpuRyQ6w/dg8PaicLFhzkdtm3xLorHnNwVHTKGtaI8td7ni/lmTvD9sFgr5FtFxtes7XjauXuoTcWq+aZV7CZG41jBjbhQPAdq8VpeFhq839bDPgm9jocYuz67AYnQaXHbbEerF9IOjnRG83Kk00JbdJxHXRbbPIfYKbTU6bmJbglrnbs+Q6hgHAbhHd6y0BL6EpTaxsscctvm6vkbAreU7ueNW0Z8Ie6V3bYH4Q9JkYc3ll1nArHqUJJovchFwWuX9vE+so2K2jFgvCDbBX1LpIFreOlJAt79cRe5060clil7DrFLiWxR4z42tg4c8Pgj4zvQ1hYo2nxyxyxcd1XKlPdvMiHicniW0AMMZYy1cfY/ceP9Wyy0r3JW8ef55Dby4OYj4vCPrM9P47fRzLULmZdXOzGLlNEhNyK0PLrPFM6AEAsvXHE2PyPjzn1xk7bVElbxJ1JdDpdklc7dFi94+TLb8ZEPQNEMtI4qDNBrHKz7766qvBKteu2BLdjHhISmwoMWVXDADQ2yzGd6LzAq+KGmXDv//++8N1Rm09Qsg3A4K+AaYMYrnX7927Vx4+fDhY6IdHXd18wlupxLVq2exMFgAYY6x8NT7mRd274mWhqzmNMuKjG74lL6xT84Ogz0zvANaEkDX+zTffDNa5JoevIY9ZqAg6AMzJ2JpRc4tHN7wdvSz3u1nrvkMlon52IOgzkcWg/H2PLHEJuSxz3ZZwK+FEgm5El3r2Pog4AKxKLZad1bFH48LXscs4kahrzVLS3HvvvVfefffd49h6fN9WBRCsB4J+hmjgq8Pbt99+exwrt37rPtktuzZau2YAgKnUGlllBkPWVVLXWsuUxKvOc1rLZK1/8MEHQ+e5eJ5EQcw3BoI+MzUBVt91CfnXX389WOV2Frks8wN3OlKPS71UdsxMEgDopZVtnq05tXXFJ+pK0M1al5jLBa/4uvrDF7c+6vnsoChYDwR9JmpdmvS4jjSVmKskTYNdO1YNcDub3Go+oyC3mtGUxHUFAHDWa95BOJ9dlroMGFntWufUjEbCLoHPKnEQ9flA0GciaxSjAa0GMd99991x4psGr4TcJ8BZxmhplJ/FQxIylxgCDwBzk60rscY8egxlqUvYD91pbnfv3h0y4bX+xfdD1OfhwhL+iLnJXNe1XWXNRa5yNAm5BN1cUFaGlp1gNCbC2WtjcxqEHADmpuV9zB4vRwaIxc619il3SFa72lkrYU7Jc/49aglz8X2z14L7P2Ghn2RMuEsYzIehb7Huq9ObxFwno1mSiLnXS3Cf67HD5NAUAIBtJ65/Gf6YVuUMKWFOou5d8Fm4MbPgcde3wUJ31PY2tYEVB6EG7qNHj4ZYuVzscjnZcybqvj+yXWr92QEAtpnsNMcDd3iU9YW3M9e1JqrCRwIvUVf7WL9+WmOt0vACxLUZUf8DBD2hp1WrWdZe4O/fvz9Y5nK3W/tW639cjmLl/j29e6rgMgeAHSOGHL3FbTlDFkcvR69XCFJroSXOKa5u62Qt8Te7z3p5Glzujp7YTLYj1KCUVa5MdmW0W+LbQTjC1BLfSqPsjN0mAOwCtSx3E/MSknztcb8OqlWsLHUlzFmyXFljLd53sNDXxMRcB6to5+ndRb4Xuw1i27VG2FcBwK7iO8d5wTZ86FFrpFzuQkly6pqpx1SvnjWhgX6w0ANj/47Yj93EXM1ioojHxgk0gAGApZCtbUb0Tkahj7F1Jct99NFHp0R9ynoMpbzG/2CcrNGL1ZhLzHV2ubnZ/SlpPgGuVq+Zlb0BAOw6WaZ6TJgz8dYaqrVUa2rMNYJ+cLkHxuory5EQy1X0xRdfDNnsdrCKjyPF0rZWm0UAgF2j1vzK1jwvzL6Sp7gEYRN1GT1aS7/88svhUJfr16+fWi8pWRsHl3uFmlvcStMk5s+fPx8es85vsaayJCVvZGkCwBJoNbTK1kJfxua7apr4q6RN3Lx5s3z88cfDMax+E1A6k+X2GVzuE9BgkohLzC2b3U5LK8mRp9mOMmZ9xrg6AMCuUFvPSmLAWAgyPmfWux0fLUv9888/H9Za1sVpIOgJtV2g4jwSc9WZW2tDG4xjbvo46LPnAQB2hUN3QmRtrWutbd7C9zF1XWyt1XXtZ+A0CHqgVtuokjSLmVsCnG+W0Bq0PdmgAAC7TGsti1nvJYiyraGWWKzbWmvtuOnWmgp/gKAHahntGlw6YMDKLFoiDQAAq62/B+6MC52HobMxfIId1EHQR9BA0oBS8wNZ6WqI4LsgAQDAatS8lYdHR7CqPazWXkS9DwTdkWWoS8TVo10WulxBOrA/grADAKxGzbup9VbPyTN67969YS2Or8UzehIE/YhsYGiHqEYHKlOzhA0Jug00egkDAMyD7yantdZ6e2iN1RqsS2alI+p/gKAHfO91WeVq7ar6yNjStTSyPAEAoG+9zU5UswoiKwuWkMtKl+s96xUP/wdBPyIOLMVuJOa+rat/PjY8AACA1chc6VbOZtVEKheWqGtt9us2/AGqlKCBJPeOLHTtDC3j0joa1ZLiGFwAANOITWZiNznLerdqo8ePH59KpoP/g6AHLAlD5RKKofsyCk88ZKAQywEAmISPm7fWUltrJepWysZ6exoEPSB3jqxz61BksZxYUuFPTyvuvHMAAOgj6yhXO4bVXO86GEvJyt71Dv9nMYJe64lea/qSvV63FadRn3YlwvkTgqKA00wGAGBezGKvJcsJrc1ao7VWx/V7yrq8xHM0FiHoU7+Q2uvlztHuT/WOhs96948h5gAA81E72CUz0tQOVmt1LGPb93V5EYLeOuRkrO9vzGzXzs/au9bes/YYAACsRtbvPa635inVGq212jebmdrjPWvzvessxuXe+2XWsiM1QBQ3NzeOT4Zrvfe+7wgBADaJF3pbh229lpUevadlwrq8NMNsr5LiWl+y4jLKnJSV7gV96iYBAACmEePZWWzbG1jWlltrttbu3nV56Wv1YgV9arKDJVrY4PAJcTG7fZX3BwCAOn5t9eu4YU1mrPJIlrk8qjVBjz/femwpULbmDmFRokWWYVnbLQIAwGbJ1l6Lo0vQs0Nbauv80lmkoNd2eKWSeCER16DQTq+37M3jGyIAAEAfWXy8la8Us9+1ZpshFtf4fWSRgj7ly7RBYYJuA8OE3LcgrP381N8JAAAnBT1bZ33ZcCxrszPTtXZb7tO+r9F773LXQDFB9z3a4y5vSpIcAACsR22t9X3fJdYSc2+MxdftExf25W9tNZPRYNBOL5a09VjmAACw/rqc1ZPHMrR4iIvQ2m2Cbu1hW8T8qLIg8V+shV5z5cTbZqFrUBALBwA4P+L6m+U0RWSh6zIWHi0VMV8Se2Oht5Cg69LqH1ySpjRY6QAA8zJmVPkT2vRaC5muuh7TKW4heJdN67Q0hBsA4Pyp9Xrvsc4jS8yJ2mtB9y73VUQb9zwAwDysup5qDR8zyvaFvRP0OGiUFKeB4F042c/UBB9RBwDYHGPGltZuW8f3nUULek8GowaCLrVDWwAAYDvxh7XISs8Y6/q5JPa+Dr03/oLIAwCcPa211/d/t7M39plFH85SOtw1tmNDsAEAdoupntWlNwdbdB16wbIGAFg0EnU7gS1jnxqELdpHkYl57Ti9WAYx9jMAALB5erysGG7/Zy+CDq0B0XPKD4MFAOD8yc7XgD/YC0Hvja0AAMD5EvOfWsKtx+Vqj5VKc2rDLrH3aYFx0NTc7gAAsNl1uHa/NHqE2Klr1KHvkaC3Ds1fF8QfAGA15lg/fXOwfWbvLfQ5wF0PAHC+IOgI+ilWEWcsdACA1cEomgcEHQAAYAEg6CP9fcmQBwDYLHg55wFBBwCAnWTph61MBUEHAABYAAg6AADsJHSLOwmCDgAAsAAQdAAA2HqIlY+DoAMAACwABB0AAGABIOgAAAALAEEHAABYAAg6AADAAkDQAQAAFgCCDgAAsAAQdAAAgAWAoAMAACwABB0AAGABIOgAAAALAEEHAABYAAg6AADAAkDQAQAAFgCCDgAAsAAQdAAAgAWAoAMAACwABB0AAGABIOgAAAALAEEHAABYAAg6AADAAkDQAQAAFgCCDgAAsAAQdAAAgAWAoAMAACwABB0AAGABIOgAAAALAEEHAABYAAg6AADAAkDQAQAAFgCCDgAAsAAQdAAAgAWAoAMAAOw6pZT/AVrxMBxxTj/GAAAAAElFTkSuQmCC"};

    this.usersService.addUser(user).subscribe(() => {
      this.form.reset()
      this.router.navigate(['/entrar']);
    })
  }

  get nome() {
    return this.form.get('nome')
  }

  get sobrenome() {
    return this.form.get('sobrenome')
  }

  get email() {
    return this.form.get('email')
  }

  get confirmEmail() {
    return this.form.get('confirmEmail')
  }

  get senha() {
    return this.form.get('senha')
  }

  get confirmSenha() {
    return this.form.get('confirmSenha')
  }

  get dia() {
    return this.form.get('dia')
  }

  get mes() {
    return this.form.get('mes')
  }

  get ano() {
    return this.form.get('ano')
  }

  get sexo() {
    return this.form.get('sexo')
  }

  get tipoConta() {
    return this.form.get('tipoConta')
  }

  emailMatchValidation(email: string, confirmEmail: string) {
    return (formGroup: FormGroup) => {
      const controlToMatch = formGroup.controls[email];
      const control = formGroup.controls[confirmEmail];

      if (control.errors && !control.errors.mustMatch) {
        return;
      }

      if (controlToMatch.value !== control.value) {
        control.setErrors({ emailMatchValidationError: true });
      } else {
        control.setErrors(null);
      }
    }
  }

  userExistsValidation(email: string) {
    return (formGroup: FormGroup) => {
      const control = formGroup.controls[email];
      let exists = false

      this.usersService.getUserByEmail(control.value).subscribe((usuario: Usuario[]) => {
        
        if(usuario.length > 0){
          exists = true
        }

        if (control.errors && !control.errors.mustMatch) {
          return;
        }
  
        if (exists) {
          control.setErrors({ userExistsValidationError: true });
        } else {
          control.setErrors(null);
        }
      })
    }
  }

  senhaMatchValidation(senha: string, confirmSenha: string) {
    return (formGroup: FormGroup) => {
      const controlToMatch = formGroup.controls[senha];
      const control = formGroup.controls[confirmSenha];

      if (control.errors && !control.errors.mustMatch) {
        return;
      }

      if (controlToMatch.value !== control.value) {
        control.setErrors({ senhaMatchValidationError: true });
      } else {
        control.setErrors(null);
      }
    }
  }
}
